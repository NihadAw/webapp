"use strict";angular.module("webApp",["ui.router","ngStorage"]).run(function(){console.log("webApp run")}).config(["$stateProvider","$urlRouterProvider","$logProvider",function(a,b,c){c.debugEnabled(!1),a.state("app",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("app.taba",{url:"tab-a/:id",templateUrl:"views/tab_a.html",controller:"TabACtrl"}).state("app.tabb",{url:"tab-b/:id",templateUrl:"views/tab_b.html",controller:"TabBCtrl",persist:!0}),b.otherwise("tab-b/1")}]),angular.module("webApp").controller("MainCtrl",["$scope","dataService","$log","$location",function(a,b,c,d){c.debug("MainCtrl"),a.notification="hello World!",b.getNotification().then(function(b){a.notification=b}),b.getQuickActions().then(function(b){c.debug("getQuickActions: ",b),a.quickActions=b}),a.isActive=function(a){var b=a===d.path();return b}}]),angular.module("webApp").controller("TabACtrl",["$stateParams","$scope","$sce",function(a,b,c){"2"===a.id?b.url="https://www.paulirish.com/":b.url="https://addyosmani.com/",b.loaded=!1,b.url=c.trustAsResourceUrl(b.url),b.iframeLoad=function(){b.$apply(function(){b.loaded=!0})}}]),angular.module("webApp").controller("TabBCtrl",["$stateParams","$scope","$log","$sce","dataService",function(a,b,c,d,e){var f=a.id,g=function(){c.debug("TabBCtrl init"),b.selectedLink={name:"Links",url:""},b.showMenu=!1,b.loaded=!1,e.fetchData().then(function(){b.sitesList=e.getTabData(f),void 0===b.sitesList[0].name||""===b.sitesList[0].name?b.showMenu=!0:b.setSrc(0)})};g(),b.submitForm=function(){b.sitesForm.$valid?(c.debug("Form is VALID",b.sitesList),e.setTabData(f,b.sitesList)):c.error("Form is not VALID"),b.showMenu=!1},b.setSrc=function(a){b.loaded=!1,b.iframesrc=d.trustAsResourceUrl(b.sitesList[a].url),b.selectedLink.name=b.sitesList[a].name,b.selectedLink.url=b.sitesList[a].url},b.iframeLoad=function(){c.debug("iframe loaded..."),b.$apply(function(){b.loaded=!0})}}]),angular.module("webApp").service("dataService",["$http","$log","$q","$localStorage",function(a,b,c,d){var e="data/config.json",f={},g=function(){b.debug("dataService init"),void 0===d.webapp&&(d.webapp={tabsList:[]})};return g(),f.fetchData=function(){var g=c.defer();return a.get(e,{cache:!0}).success(function(a){f.data=a,b.debug("dataService fetchData():",a),void 0!==d.webapp.tabsList&&d.webapp.tabsList.length>0?f.data.tabsList=d.webapp.tabsList:d.webapp=a,g.resolve(f.data)}).error(function(a,c){b.error("dataService fetchData() Error,  status : "+c)}),g.promise},f.getNotification=function(){var a=c.defer();return f.data&&void 0!==f.data?a.resolve(f.data.notification):f.fetchData().then(function(){a.resolve(f.data.notification)}),a.promise},f.getQuickActions=function(){var a=c.defer();return f.data&&void 0!==f.data?a.resolve(f.data.quickActions):f.fetchData().then(function(){a.resolve(f.data.quickActions)}),a.promise},f.setTabData=function(a,c){b.debug("dataService setTabData:",c),--a,f.data.tabsList[a].siteList=c,d.webapp.tabsList=f.data.tabsList,b.debug("setTabData:",f.data)},f.getTabData=function(a){return b.debug("dataService getTabData:",a),--a,void 0!==f.data.tabsList[a]&&void 0!==f.data.tabsList[a].siteList?f.data.tabsList[a].siteList:[{},{},{}]},f}]),angular.module("webApp").directive("httpPrefix",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){return a&&!/^(https?):\/\//i.test(a)&&-1==="http://".indexOf(a)?(d.$setViewValue("http://"+a),d.$render(),"http://"+a):a}d.$formatters.push(e),d.$parsers.push(e)}}}).directive("iframeOnload",[function(){return{scope:{callBack:"&iframeOnload"},link:function(a,b){b.on("load",function(){return a.callBack()}),a.$on("$destroy",function(){b.off("load")})}}}]),angular.module("webApp").run(["$templateCache",function(a){a.put("views/main.html",'<!-- notification Section --> <section class="row notification"> <div class="col-md-12"> <p ng-if="notification"> <i class="glyphicon glyphicon-info-sign"></i> {{ notification }} </p> </div> </section> <hr> <!-- quickActions Section --> <section class="row links"> <div ng-repeat="action in quickActions" class="dropdown col-md-4 text-center"> <div class="dropdown"> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu{{$index}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> {{action.actionsLabel}} <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"> <li ng-repeat="item in action.actions"> <a href="{{item.url}}" target="_blank"> {{item.label}}</a> </li> </ul> </div> </div> </section> <hr> <!-- tabs section--> <section class="tabs"> <div class="row"> <div class="col-md-12"> <ul class="nav nav-tabs nav-justified"> <li ui-sref="app.tabb({id:1})" ng-class="{ active: isActive(\'/tab-b/1\') }"> <a> <i class="glyphicon glyphicon-share"></i> Quick Reports </a> </li> <li ui-sref="app.taba({id:2})" ng-class="{ active: isActive(\'/tab-a/2\') }"> <a> <i class="glyphicon glyphicon-star"></i> Folders </a> </li> <li ui-sref="app.tabb({id:3})" ng-class="{ active: isActive(\'/tab-b/3\') }"> <a> <i class="glyphicon glyphicon-folder-open"></i> My Team Folders </a> </li> <li ui-sref="app.taba({id:4})" ng-class="{ active: isActive(\'/tab-a/4\') }"> <a> <i class="glyphicon glyphicon-list-alt"></i> Public Folders </a> </li> </ul> </div> </div> <!-- tab ui-view --> <div class="row"> <div class="col-md-12"> <div ui-view></div> </div> </div> </section>'),a.put("views/tab_a.html",'<div class="tab"> <div class="row"> <div class="col-md-1"> <div class="loading inline-block" ng-hide="loaded"> <a href="" class="btn"><i class="glyphicon glyphicon-refresh"></i></a> </div> </div> <div class="col-md-1 col-md-push-10"> <a href="{{url}}" class="btn pull-right" target="_blank" ng-show="url"> <i class="glyphicon glyphicon-resize-full"></i></a> </div> </div> <div class="embed-responsive embed-responsive-600h"> <iframe src="{{url}}" class="embed-responsive-item" iframe-onload="iframeLoad()"></iframe> </div> </div>'),a.put("views/tab_b.html",'<div class="tab"> <div class="row"> <!-- left links dropdown --> <div class="col-md-3"> <div class="dropdown inline-block" ng-hide="showMenu"> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> {{selectedLink.name}} <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"> <li ng-repeat="item in sitesList" ng-if="item.name"> <a href="" ng-click="setSrc($index)"> {{item.name}}</a> </li> </ul> </div> <!-- loading spinner --> <div class="loading inline-block" ng-hide="loaded"> <a href="" class="btn"><i class="glyphicon glyphicon-refresh"></i></a> </div> </div> <!-- right icons --> <div class="col-md-2 col-md-push-7"> <div class="pull-right" ng-click="showMenu = !showMenu"> <a href="{{selectedLink.url}}" class="btn" target="_blank" ng-show="selectedLink.url"> <i class="glyphicon glyphicon-resize-full"></i></a> <a href="" class="btn"><i class="glyphicon glyphicon-cog"></i></a> </div> </div> </div> <!-- sitesForm --> <div class="row"> <div class="col-md-8 col-md-push-4" ng-show="showMenu"> <form name="sitesForm" ng-submit="submitForm()" class="sitesList-form" novalidate> <ul class="list-group"> <!-- form fields --> <li ng-repeat="site in sitesList" class="list-group-item"> <span class="bold"> Report {{$index+1}}: </span> <label> Name</label> <input type="text" name="name" placeholder="Site Name" ng-model="site.name" ng-required="sitesList[$index].url"> <label> url </label> <input type="url" name="url" placeholder="Site Url" ng-model="site.url" ng-required="sitesList[$index].name" http-prefix> </li> <!-- form actions --> <li class="list-group-item"> <div class="btn-group" role="group" aria-label="..."> <button type="button" class="btn btn-default" ng-click="showMenu = !showMenu">Cancel</button> <button type="submit" class="btn btn-default" ng-disabled="sitesForm.$invalid">Save</button> </div> <small class="text-muted pull-right"><i class="glyphicon glyphicon-info-sign"></i> Please try to avoid Mixed Content ( http || https )</small> </li> </ul> </form> </div> </div> <!-- iframe section --> <div class="row"> <div class="col-md-12"> <div class="embed-responsive embed-responsive-600h"> <iframe src="{{iframesrc}}" class="embed-responsive-item" iframe-onload="iframeLoad()"></iframe> </div> </div> </div> </div>')}]);